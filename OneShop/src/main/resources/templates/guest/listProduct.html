<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh sách sản phẩm</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/assets/css/library.css}">
    <link rel="stylesheet" th:href="@{/assets/css/common.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/css/product.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/css/productSale.css}">

</head>

<body>
    <div class="header scrolling" id="myHeader">
        <div class="grid wide">
            <div class="header__top">
                <div class="navbar-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <a th:href="@{/}" class="header__logo">
                    <img th:src="@{/assets/logo.png}" alt="">
                </a>
                <div class="header__search">
                    <div class="header__search-wrap">
                        <input type="text" class="header__search-input" placeholder="Tìm kiếm">
                        <a class="header__search-icon" href="#">
                            <i class="fas fa-search"></i>
                        </a>
                    </div>
                </div>
                <div class="header__account">
                    <a href="#my-Login" class="header__account-login">Đăng Nhập</a>
                    <a href="#my-Register" class="header__account-register">Đăng Kí</a>
                </div>
                <div class="header__cart have" href="#">
                    <i class="fas fa-shopping-basket"></i>
                    <div class="header__cart-amount">
                        3
                    </div>
                    <div class="header__cart-wrap">
                        <ul class="order__list">
                            <li class="item-order">
                                <div class="order-wrap">
                                    <a th:href="@{/product}" class="order-img">
                                        <img th:src="@{/assets/img/product/product1.jpg}" alt="">
                                    </a>
                                    <div class="order-main">
                                        <a th:href="@{/product}" class="order-main-name">Áo sơ mi  caro kèm belt caro kèm belt Áo sơ mi caro kèm belt</a>
                                        <div class="order-main-price">2 x 45,000 ₫</div>
                                    </div>
                                    <a th:href="@{/product}" class="order-close"><i class="far fa-times-circle"></i></a>
                                </div>
                            </li>
                        </ul>
                        <div class="total-money">Tổng cộng: 120.000đ</div>
                        <a th:href="@{/cart}" class="btn btn--default cart-btn">Xem giỏ hàng</a>
                        <a th:href="@{/pay}" class="btn btn--default cart-btn orange">Thanh toán</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="header__nav">
            <ul class="header__nav-list">
                <li class="header__nav-item index">
                    <a th:href="@{/}" class="header__nav-link">Trang chủ</a>
                </li>
                <li class="header__nav-item">
                    <a href="#" class="header__nav-link">Giới Thiệu</a>
                </li>
                <li class="header__nav-item">
                    <a th:href="@{/list-product}" class="header__nav-link">Sản Phẩm</a>
                </li>
                <li class="header__nav-item">
                    <a th:href="@{/news}" class="header__nav-link">Tin Tức</a>
                </li>
                <li class="header__nav-item">
                    <a th:href="@{/contact}" class="header__nav-link">Liên Hệ</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="main">
        <div class="grid wide">
            <div class="main__taskbar">
                <div class="main__breadcrumb">
                    <div class="breadcrumb__item">
                        <a th:href="@{/}" class="breadcrumb__link">Trang chủ</a>
                    </div>
                    <div class="breadcrumb__item">
                        <a th:href="@{/list-product}" class="breadcrumb__link">Cửa hàng</a>
                    </div>
                </div>
                <div class="main__sort">
                    <h3 class="sort__title">
                        Hiển thị kết quả theo
                    </h3>
                    <select class="sort__select" name="" id="">
                        <option value="1">Thứ tự mặc định</option>
                        <option value="2">Mức độ phổ biến</option>
                        <option value="3">Điểm đánh giá</option>
                        <option value="4">Mới cập nhật</option>
                        <option value="5">Giá : Cao đến thấp</option>
                        <option value="6">Giá Thấp đến cao</option>
                    </select>
                </div>
            </div>
            <div class="productList">
                <div class="listProduct">
                    <div class="row">
                        <div class="col l-2 m-4 s-6">
                            <div class="product">
                                <div class="product__avt" th:style="'background-image: url(' + @{/assets/img/product/product1.jpg} + ')'">
                                </div>
                                <div class="product__info">
                                    <h3 class="product__name">Framed-Sleeve Tops Group</h3>
                                    <div class="product__price">
                                        <div class="price__old">340.000 <span class="price__unit">đ</span></div>
                                        <div class="price__new">320.000 <span class="price__unit">đ</span></div>
                                    </div>
                                </div>
                                <div class="product__sale">
                                    <span class="product__sale-percent">22%</span>
                                    <span class="product__sale-text">Giảm</span>
                                </div>
                                <a th:href="@{/product}" class="viewDetail">Xem chi tiết</a>
                                <a th:href="@{/cart}" class="addToCart">Thêm vào giỏ</a>
                            </div>
                        </div>
                        <div class="col l-2 m-4 s-6">
                            <div class="product">
                                <div class="product__avt" th:style="'background-image: url(' + @{/assets/img/product/product1.jpg} + ')'">
                                </div>
                                <div class="product__info">
                                    <h3 class="product__name">Framed-Sleeve Tops Group</h3>
                                    <div class="product__price">
                                        <div class="price__old">340.000 <span class="price__unit">đ</span></div>
                                        <div class="price__new">320.000 <span class="price__unit">đ</span></div>
                                    </div>
                                </div>
                                <a th:href="@{/product}" class="viewDetail">Xem chi tiết</a>
                                <a th:href="@{/cart}" class="addToCart">Thêm vào giỏ</a>
                            </div>
                        </div>
                        </div>
                </div>
                <div class="pagination">
                    <ul class="pagination__list">
                        <li class="pagination__item">
                            <a th:href="@{/list-product}" class="pagination__link">
                                <i class="fas fa-chevron-left"></i>
                            </a>
                        </li>
                        <li class="pagination__item active">
                            <a th:href="@{/list-product}" class="pagination__link">1</a>
                        </li>
                        <li class="pagination__item">
                            <a th:href="@{/list-product}" class="pagination__link">2</a>
                        </li>
                        <li class="pagination__item">
                            <a th:href="@{/list-product}" class="pagination__link">3</a>
                        </li>
                        <li class="pagination__item">
                            <a th:href="@{/list-product}" class="pagination__link">...</a>
                        </li>
                        <li class="pagination__item">
                            <a th:href="@{/list-product}" class="pagination__link">
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="grid wide">
            <div class="row">
                <div class="col l-3 m-6 s-12">
                    <h3 class="footer__title">Menu</h3>
                    <ul class="footer__list">
                        <li class="footer__item">
                            <a href="#" class="footer__link">Trang điểm</a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">Chăm sóc da</a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">Chăm sóc tóc</a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">Nước hoa</a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">Chăm sóc toàn thân </a>
                        </li>
                    </ul>
                </div>
                <div class="col l-3 m-6 s-12">
                    <h3 class="footer__title">Hỗ trợ khách hàng</h3>
                    <ul class="footer__list">
                        <li class="footer__item">
                            <a href="#" class="footer__link">Hướng dẫn mua hàng</a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">Giải đáp thắc mắc</a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">Chính sách mua hàng</a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">Chính sách đổi trả</a>
                        </li>
                    </ul>
                </div>
                <div class="col l-3 m-6 s-12">
                    <h3 class="footer__title">Liên hệ</h3>
                    <ul class="footer__list">
                        <li class="footer__item">
                            <span class="footer__text">
                                    <i class="fas fa-map-marked-alt"></i> 319 C16 Lý Thường Kiệt, Phường 15, Quận 11, Tp.HCM
                                </span>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">
                                <i class="fas fa-phone"></i> 076 922 0162
                            </a>
                        </li>
                        <li class="footer__item">
                            <a href="#" class="footer__link">
                                <i class="fas fa-envelope"></i> phuonggiang150@gmail.com
                            </a>
                        </li>
                        <li class="footer__item">
                            <div class="social-group">
                                <a href="#" class="social-item"><i class="fab fa-facebook-f"></i>
                                    </a>
                                <a href="#" class="social-item"><i class="fab fa-twitter"></i>
                                    </a>
                                <a href="#" class="social-item"><i class="fab fa-pinterest-p"></i>
                                    </a>
                                <a href="#" class="social-item"><i class="fab fa-invision"></i>
                                    </a>
                                <a href="#" class="social-item"><i class="fab fa-youtube"></i>  
                                    </a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col l-3 m-6 s-12">
                    <h3 class="footer__title">Đăng kí</h3>
                    <ul class="footer__list">
                        <li class="footer__item">
                            <span class="footer__text">Đăng ký để nhận được được thông tin ưu đãi mới nhất từ chúng tôi.</span>
                        </li>
                        <li class="footer__item">
                            <div class="send-email">
                                <input class="send-email__input" type="email" placeholder="Nhập Email...">
                                <a href="#" class="send-email__link">
                                    <i class="fas fa-paper-plane"></i>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="copyright">
            <span class="footer__text"> &copy; Bản quyền thuộc về <a class="footer__link" href="#"> Nhóm 6</a></span>
        </div>
    </div>
    <div class="ModalForm">
       <div class="modal" id="my-Register">
    <a href="#" class="overlay-close"></a>
    <div class="authen-modal register">
        <h3 class="authen-modal__title">Đăng Kí</h3>
        <!-- Thêm thông báo lỗi -->
        <div id="registerError" class="alert alert-danger" role="alert" style="display: none;"></div>
        <form id="registerForm" method="post">
            <div class="form-group">
                <label for="fullName" class="form-label">Họ Tên</label>
                <input id="fullName" name="fullName" type="text" class="form-control" required>
                <span class="form-message"></span>
            </div>
            <div class="form-group">
                <label for="email" class="form-label">Tài khoản Email *</label>
                <input id="email" name="email" type="email" class="form-control" required>
                <span class="form-message"></span>
            </div>
            <div class="form-group">
                <label for="password" class="form-label">Mật khẩu *</label>
                <input id="password" name="password" type="password" class="form-control" required>
                <span class="form-message"></span>
            </div>
            <div class="form-group">
                <label for="confirmPassword" class="form-label">Nhập lại mật khẩu *</label>
                <input id="confirmPassword" name="confirmPassword" type="password" class="form-control" required>
                <span class="form-message"></span>
            </div>
            <div class="authen__btns">
                <button type="submit" class="btn btn--default">Đăng Kí</button>
            </div>
        </form>
    </div>
</div>

<div class="modal" id="my-Login">
    <a href="#" class="overlay-close"></a>
    <div class="authen-modal login">
        <h3 class="authen-modal__title">Đăng Nhập</h3>
        <!-- Thêm thông báo lỗi -->
        <div id="loginError" class="alert alert-danger" role="alert" style="display: none;"></div>
        <form id="loginForm" method="post">
            <div class="form-group">
                <label for="account" class="form-label">Địa chỉ email *</label>
                <input id="account" name="account" type="email" class="form-control" required>
                <span class="form-message"></span>
            </div>
            <div class="form-group">
                <label for="password" class="form-label">Mật khẩu *</label>
                <input id="password" name="password" type="password" class="form-control" required>
                <span class="form-message"></span>
            </div>
            <div class="authen__btns">
                <button type="submit" class="btn btn--default">Đăng Nhập</button>
                <input type="checkbox" class="authen-checkbox" name="remember-me">
                <label class="form-label">Ghi nhớ mật khẩu</label>
            </div>
        </form>
        <a class="authen__link" href="/forgot">Quên mật khẩu ?</a>
    </div>
</div>
        <div class="up-top" id="upTop" onclick="goToTop()">
            <i class="fas fa-chevron-up"></i>
        </div>

    </div>
    <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/assets/js/commonscript.js}"></script>
    <script>
    $(document).ready(function() {
        // Xử lý form đăng ký
        $('#registerForm').submit(function(e) {
            e.preventDefault(); // Ngăn reload trang
            $('#registerError').hide(); // Ẩn lỗi cũ
            var formData = $(this).serialize();
            $.ajax({
                type: 'POST',
                url: '/api/auth/signup',
                data: formData,
                success: function(response) {
                    if (response.success) {
                        window.location.href = response.redirect; // Chuyển trang nếu thành công
                    } else {
                        $('#registerError').text(response.message).show(); // Hiển thị lỗi trong modal đăng ký
                    }
                },
                error: function() {
                    $('#registerError').text('Có lỗi xảy ra!').show();
                }
            });
        });

        // Xử lý form đăng nhập
        $('#loginForm').submit(function(e) {
            e.preventDefault(); // Ngăn reload trang
            $('#loginError').hide(); // Ẩn lỗi cũ
            var formData = $(this).serialize();
            $.ajax({
                type: 'POST',
                url: '/login',
                data: formData,
                beforeSend: function(xhr) {
                    xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"); // Đánh dấu AJAX
                },
                success: function(response) {
                    if (response.success) {
                        window.location.href = response.redirect; // Chuyển trang nếu thành công
                    } else {
                        $('#loginError').text(response.message).show(); // Hiển thị lỗi trong modal đăng nhập
                    }
                },
                error: function(xhr) {
                    if (xhr.status === 401) {
                        $('#loginError').text('Tài khoản hoặc mật khẩu không chính xác!').show();
                    } else {
                        $('#loginError').text('Có lỗi xảy ra!').show();
                    }
                }
            });
        });
    });
</script>
</body>

</html>